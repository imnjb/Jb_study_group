### **📌 3. SQL**

### **✅ SQL이란?**

SQL(Structured Query Language)은 관계형 데이터베이스에서 데이터를 정의하고 조작하는 표준 언어이다.

사용자는 SQL을 통해 데이터를 생성, 조회, 수정, 삭제할 수 있으며, 데이터베이스의 구조나 권한도 제어할 수 있다.

---

### **✅ SQL의 주요 분류**

**1. DDL (Data Definition Language)**

데이터베이스의 구조를 정의하거나 변경하는 명령이다.

- CREATE: 테이블, 뷰 등을 생성하는 명령이다.
- ALTER: 테이블의 구조를 수정하는 명령이다.
- DROP: 테이블이나 객체를 삭제하는 명령이다.

**2. DML (Data Manipulation Language)**

테이블 내 데이터를 조작하는 명령이다.

- SELECT: 데이터를 조회하는 명령이다.
- INSERT: 새 데이터를 삽입하는 명령이다.
- UPDATE: 기존 데이터를 수정하는 명령이다.
- DELETE: 데이터를 삭제하는 명령이다.

**3. DCL (Data Control Language)**

사용자의 권한을 제어하는 명령이다.

- GRANT: 권한을 부여하는 명령이다.
- REVOKE: 권한을 회수하는 명령이다.

---

### **✅ SELECT 문의 기본 구조**

SELECT 문은 데이터를 조회할 때 사용하는 기본 명령이다.

- SELECT: 조회할 컬럼을 지정하는 명령이다.
- FROM: 데이터를 조회할 테이블을 지정하는 명령이다.
- WHERE: 조건을 지정하여 데이터를 필터링하는 명령이다.
- GROUP BY: 데이터를 그룹화하는 명령이다.
- HAVING: 그룹화된 데이터에 조건을 적용하는 명령이다.
- ORDER BY: 정렬 기준을 지정하는 명령이다.

---

### **✅ 서브쿼리(Subquery)**

서브쿼리는 SQL 문 안에 포함된 또 다른 SQL 문을 의미하며, 중첩 쿼리라고도 한다.

WHERE, FROM, SELECT 절 등에서 사용되며, 복잡한 조건 비교나 연산에 사용된다.

서브쿼리는 경우에 따라 JOIN으로 대체하는 것이 성능상 유리할 수 있다.

---

### **📌 4. 효율적인 쿼리 작성**

### **✅ 쿼리 성능이 중요한 이유**

데이터가 많은 시스템에서는 비효율적인 쿼리 한 줄이 전체 서비스 성능을 저하시킬 수 있다.

응답 속도 지연, 서버 과부하, 사용자 경험 악화로 이어지기 때문에, 쿼리의 효율성은 매우 중요하다.

---

### **✅ 인덱스(Index)의 역할과 특징**

인덱스는 테이블의 특정 컬럼에 대한 검색 속도를 높이는 자료 구조이다.

WHERE, JOIN, GROUP BY, ORDER BY 절에서 자주 사용되는 컬럼에 적용하면 성능 향상에 도움이 된다.

하지만 인덱스가 많으면 INSERT, UPDATE, DELETE 시 성능이 저하될 수 있다.

따라서 읽기 작업이 많은 시스템에 적합하다.

---

### **✅ 인덱스를 적용하기 좋은 조건**

- WHERE 절에서 자주 사용하는 컬럼은 인덱스를 적용하는 것이 좋다.
- JOIN 조건에 사용되는 컬럼은 인덱스를 설정하는 것이 바람직하다.
- ORDER BY나 GROUP BY 대상 컬럼에도 인덱스를 적용하면 성능이 향상된다.
- 선택도(고유한 값의 분포)가 높은 컬럼일수록 인덱스의 효과가 크다.

---

### **✅ 조인의 종류와 특성**

**1. Nested Loop Join**

두 테이블의 모든 조합을 반복적으로 비교하는 방식이다. 인덱스가 있을 경우 빠르지만, 없으면 매우 느릴 수 있다.

**2. Merge Join**

정렬된 데이터를 병합하여 조인하는 방식이다. 양쪽 테이블이 정렬되어 있을 때 매우 효율적이다.

**3. Hash Join**

해시 테이블을 이용해 조인하는 방식이다. 대용량 데이터를 다룰 때 유리하지만, 메모리를 많이 사용한다.

---

### **✅ 쿼리 튜닝 전략**

- SELECT *는 사용하지 않는 것이 좋다. 필요한 컬럼만 명시해야 한다.
- WHERE 조건은 선택도가 높은 컬럼부터 작성하는 것이 좋다.
- JOIN 조건은 인덱스가 적용된 컬럼으로 설정하는 것이 바람직하다.
- 서브쿼리보다 JOIN을 사용하는 것이 성능상 유리한 경우가 많다.
- 실행 계획을 분석하여 병목 지점을 파악하고, 해당 쿼리를 개선해야 한다.

---

### **✅ 핵심 요약**

- SQL은 단순히 데이터를 조회하는 언어가 아니라, 데이터베이스 시스템의 성능과 안정성에 직접적인 영향을 주는 도구이다.
- 실무에서 쿼리를 작성할 때는 항상 명확성과 효율성, 처리 속도를 고려해야 한다.
- 인덱스 설정, 조인 방식, 조건절 순서 등은 선택이 아닌 필수 고려 요소이다.
- 효율적인 쿼리 작성을 위한 기준과 원칙은 “더 빠르고 안정적인 서비스”를 위한 기본 전략이다.